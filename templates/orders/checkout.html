{% load static %}
{% load i18n %}
<!doctype html>
<html lang="zxx">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="{% static 'assets/css/bootstrap..min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/boxicons.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/flaticon.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/owl.carousel.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/odometer.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/meanmenu.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/animate.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/nice-select.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/viewer.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/slick.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/magnific-popup.min.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/style.css'%}">
    <link rel="stylesheet" href="{% static 'assets/css/responsive.css'%}">
    <title>Raque - Education & Online Courses HTML Template</title>
    <link rel="icon" type="image/png" href="{% static 'assets/img/favicon.png'%}">
</head>

<body>

    <div class="preloader">
        <div class="loader">
            <div class="shadow"></div>
            <div class="box"></div>
        </div>
    </div>


    <header class="header-area">
        <div class="top-header">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-8">
                        <ul class="top-header-contact-info">
                            <li>
                                <i class='bx bx-phone-call'></i>
                                <span>Contact support</span>
                                <a href="tel:502464674">+502 464 674</a>
                            </li>
                            <li>
                                <i class='bx bx-map'></i>
                                <span>Our location</span>
                                <a href="#">New York, USA</a>
                            </li>
                            <li>
                                <i class='bx bx-envelope'></i>
                                <span>Contact email</span>
                                <a
                                    href="https://templates.envytheme.com/cdn-cgi/l/email-protection#4c24292020230c3e2d3d3929622f2321"><span
                                        class="__cf_email__"
                                        data-cfemail="f098959c9c9fb08291818595de939f9d">[email&#160;protected]</span></a>
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-4">
                        <div class="top-header-btn">
                            <a href="{% url 'login_form'%}" class="default-btn"><i class='bx bx-log-in icon-arrow before'></i><span
                                    class="label">Log In</span><i class="bx bx-log-in icon-arrow after"></i></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="navbar-area">
            <div class="raque-responsive-nav">
                <div class="container">
                    <div class="raque-responsive-menu">
                        <div class="logo">
                            <a href="{% url 'index'%}">
                                <img src="{% static 'assets/img/black-logo.png'%}" alt="logo">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="raque-nav">
                <div class="container">
                    <nav class="navbar navbar-expand-md navbar-light">
                        <a class="navbar-brand" href="{% url 'index'%}">
                            <img src="{% static 'assets/img/black-logo.png'%}" alt="logo">
                        </a>
                        <div class="collapse navbar-collapse mean-menu">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a href="{% url 'index'%}" class="nav-link">{% trans 'Home'%}</a></li>
                                <li class="nav-item"><a href="{% url 'about_us'%}" class="nav-link">{% trans 'Aboutus'%}</a></li>
                                <li class="nav-item"><a href="#" class="nav-link">{% trans 'Category'%}<i class='bx bx-chevron-down'></i></a>
                                    <ul class="dropdown-menu">
                                        {% for rs in category %}
                                        <li class="nav-item"><a href="{% url 'category_study' rs.id rs.slug %}" class="nav-link">{{ rs.title }}</a></li>
                                        {% endfor %}
                                    </ul>
                                </li>
                                <li class="nav-item"><a href="{% url 'teacher_all'%}" class="nav-link">{% trans 'Teachers'%}</a></li>
                                <li class="nav-item"><a href="{% url 'blog'%}" class="nav-link">{% trans 'Blog'%}</a></li>
                                <li class="nav-item"><a href="{% url 'faq'%}" class="nav-link">{% trans "FAQ's"%}</a></li>
                                <li class="nav-item"><a href="{% url 'contactus'%}" class="nav-link">{% trans 'Contact'%}</a></li>
                            </ul>
                            <div class="others-option">
                                <div class="language-switcher d-inline-block">
                                    <form class="form-inline" action="{% url 'selectlanguage' %}" method="post">
                                             {% csrf_token %}
                                               <input name="next" type="hidden" value="{{ redirect_to }}">
                                                    <select name="language" onchange="submit()">
                                                        {% get_current_language as LANGUAGE_CODE %}
                                                        {% get_available_languages as LANGUAGES %}
                                                        {% get_language_info_list for LANGUAGES as languages %}
                                                        {% for language in languages %}
                                                        <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                                                                    {{ language.name_local }} ({{ language.code }})
                                                        </option>
                                                        {% endfor %}
                                                    </select>
                                                    <noscript>
                                                        <input type="submit" value="Set" />
                                                    </noscript>
                                        </form>
                                </div>
                                {% if user.id is not None %}
                                <a href="{% url 'shopcart'%}" class="cart-wrapper-btn d-inline-block">
                                    <i class='bx bx-cart-alt'></i>
                                </a>
                                {% endif %}
                                <div class="search-box d-inline-block">
                                    <i class='bx bx-search'></i>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>


        <div class="navbar-area header-sticky">
            <div class="raque-nav">
                <div class="container">
                    <nav class="navbar navbar-expand-md navbar-light">
                        <a class="navbar-brand" href="{% url 'index'%}">
                            <img src="{% static 'assets/img/black-logo.png'%}" alt="logppo">
                        </a>
                        <div class="collapse navbar-collapse">
                            <ul class="navbar-nav">
                                <li class="nav-item"><a href="{% url 'index'%}" class="nav-link">{% trans 'Home'%}</a></li>
                                <li class="nav-item"><a href="{% url 'about_us'%}" class="nav-link">{% trans 'Aboutus'%}</a></li>
                                <li class="nav-item"><a href="#" class="nav-link">{% trans 'Category'%}<i class='bx bx-chevron-down'></i></a>
                                    <ul class="dropdown-menu">
                                        {% for rs in category %}
                                        <li class="nav-item"><a href="{% url 'category_study' rs.id rs.slug %}" class="nav-link">{{ rs.title }}<i class='bx bx-chevron-right'></i></a></li>
                                        {% endfor %}
                                    </ul>
                                </li>
                                <li class="nav-item"><a href="{% url 'teacher_all'%}" class="nav-link">{% trans 'Teachers'%}</a></li>
                                <li class="nav-item"><a href="{% url 'blog'%}" class="nav-link">{% trans 'Blog'%}</a></li>
                                <li class="nav-item"><a href="{% url 'faq'%}" class="nav-link">{% trans "FAQ's"%}</a></li>
                                <li class="nav-item"><a href="{% url 'contactus'%}" class="nav-link">{% trans 'Contact'%}</a></li>
                            </ul>
                            <div class="others-option">
                                <div class="language-switcher d-inline-block">
                                    <form class="form-inline" action="{% url 'selectlanguage' %}" method="post">
                                             {% csrf_token %}
                                               <input name="next" type="hidden" value="{{ redirect_to }}">
                                                    <select name="language" onchange="submit()">
                                                        {% get_current_language as LANGUAGE_CODE %}
                                                        {% get_available_languages as LANGUAGES %}
                                                        {% get_language_info_list for LANGUAGES as languages %}
                                                        {% for language in languages %}
                                                        <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                                                                    {{ language.name_local }} ({{ language.code }})
                                                        </option>
                                                        {% endfor %}
                                                    </select>
                                                    <noscript>
                                                        <input type="submit" value="Set" />
                                                    </noscript>
                                        </form>
                                </div>
                                {% if user.id is not None %}
                                <a href="{% url 'shopcart'%}" class="cart-wrapper-btn d-inline-block">
                                    <i class='bx bx-cart-alt'></i>
                                </a>
                                {% endif %}
                                <div class="search-box d-inline-block">
                                    <i class='bx bx-search'></i>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>


    <div class="search-overlay">
        <div class="d-table">
            <div class="d-table-cell">
                <div class="search-overlay-layer"></div>
                <div class="search-overlay-layer"></div>
                <div class="search-overlay-layer"></div>
                <div class="search-overlay-close">
                    <span class="search-overlay-close-line"></span>
                    <span class="search-overlay-close-line"></span>
                </div>
                <div class="search-overlay-form">
                    <form action="{% url 'search'%}" method="post">
                        {% csrf_token %}
                        <input type="text" name="searched" class="input-search" placeholder="Search here...">
                        <button type="submit"><i class='bx bx-search-alt'></i></button>
                    </form>
                </div>
            </div>
        </div>
    </div>


    <div class="page-title-area item-bg1 jarallax" data-jarallax='{"speed": 0.3}'>
        <div class="container">
            <div class="page-title-content">
                <ul>
                    <li><a href="{% url 'index'%}">Home</a></li>
                    <li>Shop</li>
                </ul>
                <h2>Checkout</h2>
            </div>
        </div>
    </div>


    <section class="checkout-area ptb-100">
        <div class="container">
            <div class="user-actions">
                <i class='bx bx-log-in'></i>
                <span>Returning customer? <a href="{% url 'login_form'%}">Click here to login</a></span>
            </div>



                <div class="row">
                    <div class="col-lg-6 col-md-12">
                        <div class="billing-details">
                            <h3 class="title">Billing Details</h3>
                            <div class="row">
                                
                                <div class="col-lg-6 col-md-6">
                                    <div class="form-group">
                                        <label>card number<span class="required">*</span></label>
                                        <div class="select-box">
                                            <input type="text" placeholder="XXXX-XXXX-XXXX-XXXX" name="number" id="number">

                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6 col-md-6">
                                    <div class="form-group">
                                        <label>expire<span class="required">*</span></label>
                                        <div class="select-box">
                                            <input type="text" placeholder="00/00" name="expire" id="expire">
                                        </div>
                                    </div>
                                </div>
                               


{#                                <div class="col-lg-12 col-md-12">#}
{#                                    <div class="form-check">#}
{#                                        <input type="checkbox" class="form-check-input" id="create-an-account">#}
{#                                        <label class="form-check-label" for="create-an-account">Create an#}
{#                                            account?</label>#}
{#                                    </div>#}
{#                                </div>#}
{#                                <div class="col-lg-12 col-md-12">#}
{#                                    <div class="form-check">#}
{#                                        <input type="checkbox" class="form-check-input" id="ship-different-address">#}
{#                                        <label class="form-check-label" for="ship-different-address">Ship to a different#}
{#                                            address?</label>#}
{#                                    </div>#}
{#                                </div>#}
                            
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-md-12">
                        <div class="order-details">
                            <h3 class="title">Your Order</h3>
                            <div class="order-table table-responsive">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th scope="col">Product Name</th>
                                            <th scope="col">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>



                                        {% for rs in shopcart %}
                                        <tr>
                                            <td class="order-subtotal">
                                                <span>{{ rs.study.title }}</span>
                                            </td>
                                            <td class="order-subtotal-price">
                                                <span class="order-subtotal-amount">{{ rs.study.price }} sum</span>
                                            </td>
                                        </tr>
                                        {% endfor %}
                                        <tr>
                                            <td class="total-price">
                                                <span>Order Total</span>
                                            </td>
                                            <td class="product-subtotal">
                                                <input class="subtotal-amount" name="price" value="{{ total }}" id="price" >
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="payment-box">
                                <div class="payment-method">
                                    <p>
                                        <input type="radio" id="direct-bank-transfer" name="radio-group" checked>
                                        <label for="direct-bank-transfer">Direct Bank Transfer</label>
                                        Make your payment directly into our bank account. Please use your Order ID as
                                        the payment reference. Your order will not be shipped until the funds have
                                        cleared in our account.
                                    </p>
                                    <p>
                                        <input type="radio" id="paypal" name="radio-group">
                                        <label for="paypal">PayPal</label>
                                    </p>
                                    <p>
                                        <input type="radio" id="cash-on-delivery" name="radio-group">
                                        <label for="cash-on-delivery">Cash on Delivery</label>
                                    </p>
                                </div>
                                <button  class="default-btn" onclick="cardcreate()">Submit</button><i class='bx bx-paper-plane icon-arrow before'></i><span
                                        class="label">Place Order</span><i
                                        class="bx bx-paper-plane icon-arrow after"></i>
                            <br>
                            <br>
                            <div class="col-lg-6 col-md-6">
                                <div class="form-group">
                                    <label>verify code<span class="required">*</span></label>
                                    <div class="select-box" >
                                        <input type="text" placeholder="******" name="expire" id="code">
                                    </div>
                                    <button  class="default-btn" onclick="checkcode()">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </section>


    {% include 'footer_2.html'%}
    <div class="go-top"><i class='bx bx-up-arrow-alt'></i></div>

    <script src="{% static 'assets/js/decode.js'%}"></script>
    <script src="{% static 'assets/js/jquery.min.js'%}"></script>
    <script src="{% static 'assets/js/popper.min.js'%}"></script>
    <script src="{% static 'assets/js/bootstrap.min.js'%}"></script>
    <script src="{% static 'assets/js/owl.carousel.min.js'%}"></script>
    <script src="{% static 'assets/js/mixitup.min.js'%}"></script>
    <script src="{% static 'assets/js/parallax.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery.appear.min.js'%}"></script>
    <script src="{% static 'assets/js/odometer.min.js'%}"></script>
    <script src="{% static 'assets/js/particles.min.js'%}"></script>
    <script src="{% static 'assets/js/meanmenu.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery.nice-select.min.js'%}"></script>
    <script src="{% static 'assets/js/viewer.min.js'%}"></script>
    <script src="{% static 'assets/js/slick.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery.magnific-popup.min.js'%}"></script>
    <script src="{% static 'assets/js/jquery.ajaxchimp.min.js'%}"></script>
    <script src="{% static 'assets/js/form-validator.min.js'%}"></script>
    <script src="{% static 'assets/js/contact-form-script.js'%}"></script>
    <script src="{% static 'assets/js/main.js'%}"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.0-rc.1/dist/js.cookie.min.js"></script>
        <script type="text/javascript">
            let csrftoken = Cookies.get('csrftoken');
            let price = document.getElementById('price').value;

            let token = undefined
            function cardcreate(){
                let number = document.getElementById('number').value;
                let expire = document.getElementById('expire').value;
                var cardData = {
                        "id": 123,
                        "params": {
                            "card": { "number": number, "expire": expire},
                            "amount": parseInt(`${price.replace(".","")}`), 
                            "save": true
                        }
                    }


                fetch("http://127.0.0.1:8000/en/api/payme/card/create/",{
                    method:"POST",
                    body:JSON.stringify(cardData),
                    headers: {
                        "Content-Type": "application/json",
                        "X-CSRFToken": csrftoken
                    },

                    }
                    )
                    .then((response) => response.json())
                    .then((json) => {
                        token = json.token
                    })
            }
            
            function checkcode() {
                var code = document.getElementById("code").value;
                
                let _data = {
                    id: 123,
                    params: {
                        token: token,
                        code: code,
                    },
                };

                fetch("http://127.0.0.1:8000/en/api/payme/card/verify/", {
                    method: "POST",
                    body: JSON.stringify(_data),
                    headers: {
                        "Content-type": "application/json; charset=UTF-8",
                        "X-CSRFToken": csrftoken
                    },
                    
                })
                    .then((response) => response.json())
                    .then((json) => {
                        data = {
                            id: 123,
                            params: {
                                token: token,
                                amount: parseInt(`${price.replace(".","")}`),
                                account: {
                                    order_id: 1,
                                },
                            },
                        };

                        fetch(
                            "http://127.0.0.1:8000/en/api/payme/payment/",
                            {
                                method: "POST",
                                body: JSON.stringify(data),
                                headers: {
                                    "Content-type":
                                        "application/json; charset=UTF-8",
                                        "X-CSRFToken": csrftoken
                                },
                            }
                        )
                        .then((response) => response.json())
                        .then((json) => {
                            console.log(json)
                        })
                        .catch(err => {
                            console.log(err)
                        })
                    })
                    .catch((err) => console.log(err));
            }
        </script>
</body>


</html>